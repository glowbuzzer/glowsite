import {Image} from "../../framework/components/Image";

import connect_tile from "../fragments/connect_tile.svg"
import preferences from "../fragments/preferences.png?glowsite"
import connect_tile_video from "./connect_tile.webm"

In the "preferences" section of top-nav drop-down you can set the target (network address of &gbc) that &gbr connects to.

If you are developing with say WSL and GBC is running on the same host as &gbr this should be set to :`ws://localhost:9001/ws`.

If you are targeting a remote &gbc instance (for example on a Virtual Machine or Raspberry Pi) then target this host with `ws://my-host:9001/ws`.

See below.

<Image meta={preferences} alt="preferences tile" maxWidth={400}/>

In the browser, the "Connection Tile" is the goto place for all things relating to connecting to &gbc and controlling the machine state.

The following diagram illustrates the key features of the Connection Tile.

<img src={connect_tile} alt="front-end connect tile" width="100%"/>


To connect, first click the "Connect" button in the top bar. This establishes the web-sockets connection between &gbr and &gbc.

Next, by default you are in simulation mode. This means commands sent to &gbc are not passed onto any machine connected to &gbc.

If you want to control a machine for real, you need to click the "Live" button.

Whether you are in Simulation mode or Live, "Current state" will tell you the current (CiA-402) state of the machine.

If the machine is in Fault state, you will need to click the "Fault reset" button to clear the fault.

Next, the "Machine operation" buttons take the machine through its state machine. Either up to "Operation Enabled" or down to "Operation Disabled".

The follow video illustrates the connection process:

<video autoPlay loop muted playsInline>
    <source src={connect_tile_video} type="video/webm"></source>
</video>

